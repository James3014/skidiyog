[global]
; Pid file
; Note: the default prefix is /var
; Default Value: none
pid = /run/php-fpm.pid

; Error log file
; If it's set to "syslog", log is sent to 'syslog' instead of being written
; in a file.
; Note: the default prefix is /var
; Default Value: /var/log/php-fpm.log
error_log = /dev/stderr

; Log level
; Possible Values: alert, error, warning, notice, debug
; Default Value: notice
;log_level = notice

; The systemd socket activation support is to be used.  With this we can
; reduce resources usage by adapting to load instead of having static processes
; spawned by the start of the php-fpm service.  This is particularly useful
; when dealing with many pools.
; Note: When this is enabled, the listen socket MUST be defined in a service
; unit file with appropriate directives (see systemd.socket(5)).  Pool
; definitions MUST include a "listen = systemd:poolname.socket" directive.
; systemd_interval = 10s

; Process pool definitions.
; See "man php-fpm.conf" for details on these directives.
; Standard: /etc/php/fpm/pool.d/*.conf

[www]
; The address on which to accept FastCGI requests.
; Valid syntaxes are:
;   'ip.ip.ip.ip:port'    - to listen on a TCP socket to a specific IPv4 address on
;                            a specific port;
;   '[ip:ip:ip:ip]:port'  - to listen on a TCP socket to a specific IPv6 address on
;                            a specific port;
;   'port'                - to listen on a TCP socket to all addresses (IPv6 and IPv4-mapped IPv4)
;                            on a specific port;
;   '/path/to/unix/socket' - to listen on a unix socket.
; Note: This value is mandatory.
listen = 127.0.0.1:9000

; Set listen(2) backlog.
; Default Value: 511 (-1 on FreeBSD and OpenBSD)
listen.backlog = 511

; Set permissions for unix socket, if one is used. In Linux, read/write
; permissions must be set in order to allow connections from a web server. Many
; BSD-derived systems allow connections regardless of permissions.
; Default Values: owner read/write permissions only
;listen.owner = nobody
;listen.group = nobody
;listen.mode = 0660

; List of IPs/addresses that should be allowed to connect. Equivalent to the
; ALLOW_CONNECTIONS environment variable in the original spawn-fcgi. Each address
; stored in this list is matched against the peer address of the socket. This
; includes the IPs of the host and the TCP port of the connecting socket. Both
; IPv6 and IPv4-mapped IPv6 addresses are supported. Connections from UNIX domain
; sockets are not limited by this directive. Loopback IPs (127.0.0.1 and ::1)
; are always allowed.
; Default Value: Any
listen.allowed_clients = 127.0.0.1

; Specify the nice(2) priority to apply to the pool processes (only if set)
; The value can vary from -19 (highest priority) to 20 (lower priority)
; Note: â€“ If the value is not set, the OS default will be used.
;process.priority = -19

; Set the process dumpable flag (PR_SET_DUMPABLE prctl) even if the process is
; running under a different user or group (Linux only). When enabled, this
; setting allows core dumps, ptrace, etc. for the pool's child processes.
; Default Value: no
;process.dumpable = no

; Choose how the process manager, will control the number of child processes.
; Possible Values:
;   static  - a fixed number (pm.max_children) of child processes;
;   dynamic - the number of child processes created dynamically based on the
;     following directives. With this process management, there will be always at
;     least 1 child process.
;     pm.max_children      - the maximum number of children that can
;                            be alive at the same time.
;     pm.start_servers     - the number of children created on startup.
;     pm.min_spare_servers - the minimum number of children in 'idle'
;                            state (waiting to process). If the number
;                            of 'idle' processes is less than this
;                            number then some children will be created.
;     pm.max_spare_servers - the maximum number of children in 'idle'
;                            state (waiting to process). If the number
;                            of 'idle' processes is greater than this
;                            number then some children will be killed.
;   ondemand - no children are created at startup. Children will be forked when
;              new requests will connect. The following parameter are used with
;              this mode:
;     pm.max_children      - the maximum number of children that can
;                            be alive at the same time.
;     pm.process_idle_timeout - The number of seconds after which
;                            an idle process will be killed.
;   Note: This value is mandatory.
pm = dynamic

; The number of child processes to be created when pm is set to 'static' and the
; maximum number of child processes when pm is set to 'dynamic' or 'ondemand'.
; This value sets the limit on the number of simultaneous requests that will be
; served. Equivalent to the rlimit_nproc directive in some versions of Apache. The
; value must be a positive integer.
; Note: Used when pm is set to either 'static' or 'dynamic'
; Note: This value is mandatory.
pm.max_children = 50

; The number of child processes created on startup.
; Note: Used only when pm is set to 'dynamic'
; Default Value: min_spare_servers + (max_spare_servers - min_spare_servers) / 2
pm.start_servers = 5

; The desired minimum number of idle server processes.
; Note: Used only when pm is set to 'dynamic'
; Default Value: 1
pm.min_spare_servers = 5

; The desired maximum number of idle server processes.
; Note: Used only when pm is set to 'dynamic'
; Default Value: 10
pm.max_spare_servers = 20

; The number of rate-limited log lines per minute allowed when reached the max_children limit is enforced.
; Log messages will be suppressed once this limit is reached.
; Default Value: 0 (no limit)
pm.max_spawn_rate = 32

; The number of seconds after which an idle process will be killed.
; Note: Used only when pm is set to 'ondemand'
; Default Value: 10s
;pm.process_idle_timeout = 10s;

; The number of requests each child process should execute before respawning.
; This can be useful to work around memory leaks in 3rd party libraries. For
; endless request processing specify '0'. Equivalent to PHP_FCGI_MAX_REQUESTS.
; Default Value: 0
;pm.max_requests = 500

; The URI to view the FPM status page. If this value is not set, no URI will be
; recognized as a status page. By default, the status page shows the following
; information:
;   pool                 - the name of the pool;
;   process manager      - static, dynamic or ondemand;
;   start time           - the date and time FPM has started;
;   start since          - number of seconds since FPM has started;
;   accepted conn        - the number of accepted connections;
;   listen queue         - the number of request in the socket queue of the
;                          listening socket;
;   max listen queue     - the maximum number of requests in the socket queue
;                          since FPM has started;
;   listen queue len     - the size of the socket queue for listening socket;
;   idle processes       - the number of idle processes;
;   active processes     - the number of active processes;
;   total processes      - the number of idle + active processes;
;   max active processes - the maximum number of actively working children;
;   max children reached - number of times, the process limit has been reached,
;                          when pm tries to start more children (works only for
;                          pm 'dynamic' and 'ondemand');
;   slow requests        - the number of requests that exceeded your
;                          request_timeout value, only tracked if request_timeout
;                          is not set to 0
;
; The values of 'idle processes', 'active processes' and 'total processes' are
; updated each second. The value of 'accepted conn' is updated in real time.
; mod_status and mod_fastcgi must be configured to view the status page.
;pm.status_path = /status

; The ping URI to call the monitoring page of FPM. If this value is not set, no
; URI will be recognized as a ping page. This could be used to test from outside
; that FPM is alive and responding. The output of the ping page is the word
; "pong". The value must start with a leading slash (/). The answer to any
; request beginning with this URI is the word "pong". It is allowed to end the
; URI with a slash.
;ping.path = /ping

; This directive may be used to customize the response to a ping request. The
; response is formatted as text/plain with a 200 response code.
; Default Value: pong
;ping.response = pong

; The access log file
; If this directive is not set, no access log is written
; Note: the default prefix is /var
; Default Value: not set
;access.log = log/$pool.access.log

; The access log format.
; The following placeholders are allowed
;  %C  : %CPU used by the request
;       it can accept the following format:
;       - %{user}C for user CPU only
;       - %{system}C for system CPU only
;       - %{total}C  for user + system CPU (default)
;  %d  : time elapsed since the start of the request
;  %e  : an environment variable (safe GET's, POST's and SERVER's variables)
;       it can accept the following format:
;       - %{variable}e
;  %f  : script filename
;  %l  : content-length of the request (for POST requests only)
;  %m  : request method
;  %M  : peak of memory allocated by PHP
;       it can accept the following format:
;       - %{byte}M for output in bytes
;       - %{kilobyte}M        for output in kilobytes
;       - %{megabyte}M for output in megabytes
;  %n  : pool name
;  %p  : PID of the child that serviced the request
;  %P  : PID of the parent of the child that serviced the request
;  %q  : the query string (available only if q is part of the requested URI)
;  %Q  : the '?' character if q is part of the requested URI
;  %r  : the request URI (without query string, i.e. /status.html)
;  %R  : remote IP address
;  %s  : status (response code)
;  %t  : server time the request was received
;       it can accept the following format:
;       - %d/%b/%Y:%H:%M:%S %z (Apache compatible)
;  %T  : time the log has been written (the request has finished)
;       it can accept the following format:
;       - %d/%b/%Y:%H:%M:%S %z (Apache compatible)
;  %u  : remote user
;
; Default Value: "%R - %u %t \"%m %r\" %s"
;access.log = log/$pool.access.log

; The timeout for serving a single request after which the worker process will
; be killed. This directive should be used when the 'max_execution_time' ini option
; does not stop script execution for some reason. A value of '0' means 'off'.
; Available units: s(econds)(default), m(inutes), h(ours), or d(ays)
; Default Value: 0
;request_timeout = 0

; Set open file descriptor rlimit.
; Default Value: system defined value
;rlimit_files = 1024

; Set max core dump file rlimit.
; Default Value: 0
;rlimit_core = 0

; Chroot to this directory at the start. This directive must be set as an absolute path.
; When this directive is not set, chroot is not used.
; Note: you can prefix with 'watchdog-disk:' before the path to monitor the disk
; usage as the main value for the chroot usage.
; Default Value: not set
;chroot =

; Chdir to this directory at the start.
; Note: relative path can be used.
; Default Value: current directory or / when chroot is used
; Can be relative or absolute path.
chdir = /

; Redirect worker stdout and stderr into main error log. If not set, stdout and
; stderr will be redirected to /dev/null according to FastCGI specs.
; Note: on highloaded environement, this can cause some delay in the page process
; time (especially if error_log is set to something other than /dev/null).
; Default Value: no
;catch_workers_output = yes

; Decorate worker output with worker information and request information.
; When this directive is enabled, the output includes worker name, the current request number and it adds timing information, e.g., to help with debugging requests or to see what information is logged and at what time.
; This options has no effect if catch_workers_output is off
; Default value: no
;decorate_workers_output = no

; Clear environment in FPM workers
; Prevents arbitrary environment variables from reaching FPM worker processes
; by clearing the environment in workers before env vars specified in this pool
; configuration are added.
; Setting to "no" will make all environment variables available to PHP as
; getenv() and $_ENV superglobal
; Default Value: yes
clear_env = no

; Limits the extensions of the main script FPM will allow to parse. This can
; prevent access to other file types over the fpm socket.
; You can restrict PHP files to be in a watched directory by using the pattern
; with a trailing slash. You can also extend the security to prevent executing
; PHP files outside of a specified whitelist under the assumption it can only
; be executed by a file in these locations.
; Default Value: .php
;security.limit_extensions = .php .php3 .php4 .php5 .php7

; Pass environment variables like LD_LIBRARY_PATH. All $variables are replaced by
; their value from the environment.
; Default Value: clean env
;env[HOSTNAME] = $HOSTNAME
;env[PATH] = /usr/local/bin:/usr/bin:/bin
;env[TMP] = /tmp
;env[TMPDIR] = /tmp
;env[TEMP] = /tmp

; Additional php.ini defines, specific to this pool of workers. These settings
; overrides the values previously defined in the php.ini file. The directives are
; the same as the ones in php.ini name = value.
php_value[upload_max_filesize] = 100M
php_value[post_max_size] = 100M
php_value[default_socket_timeout] = 120
php_value[max_execution_time] = 300
